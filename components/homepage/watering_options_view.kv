<WateringOptionsView>:
    name: "watering_options_view"

    MDScrollViewRefreshLayout:
        id: refresh_layout
        refresh_callback: root.refresh_callback
        root_layout: main_layout
        size_hint: 1, 1
        scroll_distance: 10

        MDGridLayout:
            id: main_layout
            cols: 1
            size_hint_y: None
            height: self.minimum_height

            MDGridLayout:
                id: watering_programs_enable_grid
                cols: 2
                size_hint_y: None
                height: dp(80)
                padding: 10

                MDLabel:
                    text: "Enable watering programs"
                    font_style: "H5"
                    size_hint_x: 0.9

                MDAnchorLayout:
                    size_hint_x: 0.1
                    height: watering_programs_enable_grid.height
                    pos_hint: {"center_y": 0.5}

                    MDSwitch:
                        id: watering_program_switch
                        active: root.are_programs_active
                        size_hint_y: None
                        icon_active: "check"
                        icon_active_color: "white"
                        icon_inactive: "close"
                        icon_inactive_color: "grey"
                        on_touch_down: root.toggle_watering_program()

            MDGridLayout:
                cols: 2
                size_hint_y: None
                height: dp(80)
                padding: 10

                MDLabel:
                    text: "Current watering program:"
                    font_style: "H5"
                    size_hint_x: 0.5

                Spinner:
                    id: watering_program_spinner
                    text: "Select a program"
                    values: root.programs.keys()
                    size_hint_x: 0.3
                    on_text: root.change_program()

            MDGridLayout:
                cols: 1
                size_hint: 1, None
                height: dp(150)
                padding: [10, 30, 10, 10]

                MDAnchorLayout:
                    size_hint_y: None
                    height: water_now_button.height

                    MDFillRoundFlatButton:
                        id: water_now_button
                        text: "Water now"
                        font_style: "H5"
                        text_color: 1, 1, 1, 1
                        halign: "center"
                        on_release: root.toggle_water_now()

                MDAnchorLayout:
                    size_hint_y: None
                    height: water_now_label.height

                    MDLabel:
                        id: water_now_label
                        text: root.watering_label_variable
                        halign: "center"
                        font_style: "H5"